# ‚úÖ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û

## üìã –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

### 1. ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ webhook —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email –∫–ª–∏–µ–Ω—Ç—É (3 –ø–æ–ø—ã—Ç–∫–∏)
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram (3 –ø–æ–ø—ã—Ç–∫–∏)
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 2. ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ GitHub
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/t1xxasnewsteam-boop/TrustStore
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã
- –í–µ—Ä—Å–∏—è: 2.0 (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤)

### 3. ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –°–µ—Ä–≤–µ—Ä: 45.95.234.173
- –ü—É—Ç—å: /root/TrustStore
- –°—Ç–∞—Ç—É—Å: ‚úÖ Online (PID: 130690)
- –ü–∞–º—è—Ç—å: 229.5mb
- –°–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

### 4. ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ç–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑
- –ó–∞–∫–∞–∑: ORD-1762012753275
- –ö–ª–∏–µ–Ω—Ç: –ü–µ—Ç—Ä–æ—Å (t-848@mail.ru)
- Email: ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω
- Telegram: ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ

## üîß –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –°–ò–°–¢–ï–ú–´

### –°–µ—Ä–≤–µ—Ä
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (online)
- **PID:** 130690
- **Uptime:** –ó–∞–ø—É—â–µ–Ω
- **–ü–∞–º—è—Ç—å:** 229.5mb
- **SMTP:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å–µ–º

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- **YooMoney webhook:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Heleket webhook:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **Email –æ—Ç–ø—Ä–∞–≤–∫–∞:** ‚úÖ –° 3 –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
- **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** ‚úÖ –° 3 –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏

## üöÄ –ß–¢–û –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò

### –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞
   - –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–∞ –≤ –ë–î
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞**
   - –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "paid"
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ email –∫–ª–∏–µ–Ω—Ç—É**
   - 3 –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∂–¥–æ–≥–æ email
   - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram**
   - 3 –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
   - –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
   - Stack trace –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
ssh root@45.95.234.173
pm2 status
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
pm2 logs trust-store --lines 100
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–∫–∞–∑–æ–≤:
```bash
cd /root/TrustStore
sqlite3 analytics.db "SELECT order_id, customer_email, status, created_at FROM orders ORDER BY created_at DESC LIMIT 5;"
```

## üîç –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl -X POST http://localhost:3000/api/manual-send-last-order -H 'Content-Type: application/json'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook endpoints:
- YooMoney: `https://truststore.ru/api/payment/yoomoney`
- Heleket: `https://truststore.ru/api/payment/heleket`

## üìù –§–ê–ô–õ–´ –ù–ê –°–ï–†–í–ï–†–ï

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `server.js` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- `package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- `.env` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (EMAIL, TELEGRAM, YOOMONEY, HELEKET)

### –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:
- `server.js.backup.*` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

## ‚ö†Ô∏è –í–ê–ñ–ù–û

### –ï—Å–ª–∏ –∑–∞–∫–∞–∑ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
   ```bash
   pm2 logs trust-store --err --lines 50
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email –≤ `.env`:**
   ```bash
   grep EMAIL .env
   ```

3. **–û—Ç–ø—Ä–∞–≤—å –∑–∞–∫–∞–∑ –≤—Ä—É—á–Ω—É—é:**
   ```bash
   curl -X POST http://localhost:3000/api/manual-send-last-order \
     -H 'Content-Type: application/json' \
     -d '{"orderId": "ORD-XXXX"}'
   ```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –≤ –±—É–¥—É—â–µ–º:

```bash
ssh root@45.95.234.173
cd /root/TrustStore
git pull origin main
pm2 restart trust-store
```

## ‚úÖ –í–°–ï –ì–û–¢–û–í–û!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–∫–∞–∑—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π email –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram.

---

**–î–∞—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:** 2025-11-01 19:20 MSK  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

